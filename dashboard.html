<!-- dashboard.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AgroMedLink - Farmer Dashboard</title>
    <link rel="stylesheet" href="css/dashboard.css" />
    <link rel="stylesheet" href="css/global.css" />
    <link rel="stylesheet" href="css/responsive.css" />
  </head>
  <body>
    <nav class="main-nav">
      <h2 class="logo">AgroMedLink</h2>
      <button class="menu-toggle" onclick="toggleMenu()">☰</button>
      <ul id="nav-menu">
        <li><a href="home.html">Home</a></li>
        <li><a href="soil-test.html">Soil Test</a></li>
        <li><a href="health.html">Health Info</a></li>

        <li><a href="chatbot.html">SamaBot</a></li>
      </ul>
    </nav>
    <header class="dashboard-header">
      <h1>Welcome, Farmer 👩🏽‍🌾</h1>
    </header>
    <main class="dashboard-container">
      <!-- <section class="card">
        <h2>Today's Soil Status</h2>
        <p>🌱 Moisture: 42%</p>
        <p>🧪 pH Level: 6.7</p>
        <p>🧫 Nutrients: NPK Balanced</p>
      </section> -->
      <div class="card sensor-card">
        <h2>Today's Soil Data</h2>
        <p>🌱Moisture: <span id="moisture"></span></p>
        <p>🧪pH: <span id="ph"></span></p>
        <p>🧫 Nitrogen: <span id="nitrogen"></span></p>
        <p>Temperature: <span id="temperature"></span></p>
      </div>

      <section class="card">
        <h2>Weather Forecast</h2>
        <p>☀️ Sunny, 32°C</p>
        <p>💨 Winds: Light breeze</p>
        <p>💧 Humidity: 55%</p>
      </section>

      <section class="card">
        <h2>Quick Tips</h2>
        <p>✅ Water your crops early morning</p>
        <p>✅ Avoid pesticide today (high sun)</p>
      </section>

      <section class="card chatbot">
        <h2>Need Help?</h2>
        <a href="chatbot.html" class="chatbot-link">💬 Talk to SamaBot</a>
      </section>
    </main>

    <footer class="footer">
      <p>&copy; 2025 AgroMedLink - Built with ❤️ for Somali farmers</p>
    </footer>

    <script>
      function toggleMenu() {
        const nav = document.getElementById("nav-menu");
        nav.classList.toggle("show");
      }

      async function fetchSoilData() {
        try {
          const res = await fetch("http://localhost:3000/api/soil-data");
          const data = await res.json();

          document.getElementById("moisture").textContent = data.moisture + "%";
          document.getElementById("ph").textContent = data.ph;
          document.getElementById("nitrogen").textContent =
            data.nitrogen + " ppm";
          document.getElementById("temperature").textContent =
            data.temperature + "°C";
        } catch (err) {
          console.error("Failed to fetch data:", err);
        }
      }

      // Refresh every 10 seconds
      setInterval(fetchSoilData, 10000);
      fetchSoilData();
    </script>
  </body>
</html>
